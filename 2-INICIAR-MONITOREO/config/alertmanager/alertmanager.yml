global:
  smtp_smarthost: 'smtp-mail.outlook.com:587'
  smtp_from: 'Proyecto20251985@hotmail.com'
  smtp_auth_username: 'Proyecto20251985@hotmail.com'
  smtp_auth_password: 'mangaka2015'  # âš ï¸ CAMBIA ESTO por tu contraseÃ±a
  smtp_require_tls: true

route:
  receiver: 'email-notifications'
  group_by: ['alertname', 'instance']
  group_wait: 10s
  group_interval: 5m
  repeat_interval: 4h

receivers:
  - name: 'email-notifications'
    email_configs:
      - to: 'maximat4@fpuna.edu.py, wacry77@fpuna.edu.py, Proyecto20251985@hotmail.com' 
        headers:
          Subject: 'ğŸš¨ [OptiMon Alert] {{ .GroupLabels.alertname }}'
        html: |
          <!DOCTYPE html>
          <html>
          <body style="font-family: Arial, sans-serif; padding: 20px;">
            <div style="background: #f44336; color: white; padding: 15px; border-radius: 5px;">
              <h2>âš ï¸ Alerta de OptiMon</h2>
            </div>
            
            <div style="margin-top: 20px;">
              <p><strong>Nombre de la alerta:</strong> {{ .GroupLabels.alertname }}</p>
              <p><strong>Estado:</strong> {{ .Status }}</p>
              
              {{ range .Alerts }}
              <div style="background: #f5f5f5; padding: 15px; margin: 10px 0; border-left: 4px solid #ff9800;">
                <p><strong>ğŸ“ Instancia:</strong> {{ .Labels.instance }}</p>
                <p><strong>ğŸ“Š Job:</strong> {{ .Labels.job }}</p>
                <p><strong>âš¡ Severidad:</strong> {{ .Labels.severity }}</p>
                <p><strong>ğŸ“ Resumen:</strong> {{ .Annotations.summary }}</p>
                <p><strong>ğŸ“– DescripciÃ³n:</strong> {{ .Annotations.description }}</p>
                <p style="color: #666; font-size: 12px;">
                  ğŸ•’ Inicio: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
                </p>
              </div>
              {{ end }}
            </div>
            
            <hr style="margin: 20px 0;">
            <p style="color: #666; font-size: 12px;">
              Este email fue enviado automÃ¡ticamente por OptiMon.<br>
              Dashboard: <a href="http://localhost:3000">Grafana</a> | 
              Alertas: <a href="http://localhost:9093">AlertManager</a>
            </p>
          </body>
          </html>